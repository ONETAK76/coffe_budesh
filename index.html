<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- –°–∫—Ä–∏–ø—Ç —Ç–µ–ª–µ–≥—Ä–∞–º–∞ –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –≤ head -->
    <script src="https://telegram.org"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; padding: 20px; text-align: center; }
        .card { background: linear-gradient(145deg, #2c1e14, #000); border-radius: 15px; padding: 20px; border: 1px solid #c6a667; margin-bottom: 20px; }
        .bal-val { font-size: 40px; font-weight: bold; color: #c6a667; }
        .btn { width: 100%; padding: 15px; margin: 5px 0; border-radius: 10px; border: none; font-weight: bold; font-size: 16px; cursor: pointer; }
        .btn-gold { background: #c6a667; color: #000; }
        .btn-outline { background: none; border: 1px solid #c6a667; color: #c6a667; }
        #bc-img { background: white; padding: 10px; border-radius: 5px; margin-top: 15px; width: 80%; }
        .admin-box { display: none; margin-top: 20px; padding: 15px; border: 1px dashed #fff; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <div style="color: #888; font-size: 12px;">COFFEE BUDES</div>
        <div class="bal-val" id="bal">0.00</div>
        <div style="font-size: 12px; color: #888;">–±–æ–Ω—É—Å–æ–≤ (–∫—ç—à–±—ç–∫ 3%)</div>
        <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —à—Ç—Ä–∏—Ö-–∫–æ–¥ —á–µ—Ä–µ–∑ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API, —á—Ç–æ–±—ã –Ω–µ –≥—Ä—É–∑–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
        <img id="bc-img" src="" alt="—à—Ç—Ä–∏—Ö-–∫–æ–¥">
    </div>

    <button class="btn btn-outline" id="inviteBtn">üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</button>

    <div class="admin-box" id="adminArea">
        <div style="margin-bottom:10px; font-weight:bold;">–ü–ê–ù–ï–õ–¨ –ö–ê–°–°–ò–†–ê</div>
        <button class="btn btn-gold" id="scanBtn">üì∏ –°–ö–ê–ù–ï–† (–ü–†–ò–ï–ú)</button>
        <button class="btn btn-outline" id="repBtn">üìä –û–¢–ß–ï–¢</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        const params = new URLSearchParams(window.location.search);
        const uid = params.get('id');
        const isAdmin = params.get('admin') === '1';

        // –°—Ç–∞–≤–∏–º –±–∞–ª–∞–Ω—Å –∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥
        document.getElementById('bal').innerText = params.get('bal') || '0.00';
        document.getElementById('bc-img').src = "https://bwipjs-api.metafloor.com" + uid + "&scale=3&rotate=N&includetext";

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É
        if (isAdmin) document.getElementById('adminArea').style.display = 'block';

        // –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫
        document.getElementById('inviteBtn').onclick = () => {
            const link = "https://t.me" + uid;
            tg.openTelegramLink("https://t.me" + encodeURIComponent(link) + "&text=" + encodeURIComponent("–ü–æ–π–¥–µ–º –ø–∏—Ç—å –∫–æ—Ñ–µ! –î–∞—Ä—è—Ç 50 –±–æ–Ω—É—Å–æ–≤ –∑–∞ –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É."));
        };

        document.getElementById('scanBtn').onclick = () => {
            tg.showScanQrPopup({ text: "–°–∫–∞–Ω–∏—Ä—É–π –∫–æ–¥ –≥–æ—Å—Ç—è" }, (text) => {
                tg.sendData("SCAN:" + text);
                tg.closeScanQrPopup();
            });
        };

        document.getElementById('repBtn').onclick = () => {
            tg.sendData("ACTION:REPORT");
        };
    </script>
</body>
</html>

